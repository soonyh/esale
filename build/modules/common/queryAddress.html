<div class="modal"><div class="modal-header">查询装机地址</div><div class="modal-search-bar"><div class="weui-search-bar" id="searchBar"><form class="weui-search-bar__form" id="form-queryAddress"><div class="weui-search-bar__box"><i class="weui-icon-search"></i> <input type="search" class="weui-search-bar__input" name="keyword" placeholder="街道" onkeydown="if(13==event.keyCode)return!1"> <a href="javascript:" class="weui-icon-clear" id="searchClear"></a></div><label class="weui-search-bar__label" id="searchText"><i class="weui-icon-search"></i> <span>输入街道</span></label></form><a href="javascript:" class="weui-search-bar__cancel-btn" onclick="QueryAddress.search()">确定</a></div></div><div class="modal-body"><div id="container-queryAddress"><div class="weui-loadmore weui-loadmore_line"><span class="weui-loadmore__tips" style="background-color:#EFEFF4">暂无数据</span></div></div><div class="weui-loadmore" style="display:none"><i class="weui-loading"></i> <span class="weui-loadmore__tips">正在加载</span></div><div class="noContent" style="display:none"><span class="weui-loadmore__tips">没有更多内容</span></div></div></div><style>#container-queryAddress .form-group{border-top:none;margin-top:0}#container-queryAddress .form-group:nth-child(odd){background-color:transparent}.padding-z:before{left:0}</style><script type="text/html" id="art-queryAddress">{{ if list.length > 0}} {{ each list}}
  <div class="form-group" data-value="{{$value.value}}" onclick="QueryAddress.confirmIt(this)">
    <div class="wrapper" style="left:10px;">
      <div class="input-label">{{$value.label}}</div>
      <div class="other"><i class="iconfont icon-xiangyou1"></i>
      </div>
    </div>
  </div>
  {{/each}} {{else}}
  <p class="padding-h" style="color:#bbb;">没有查询到结果</p>
  {{/if}}</script><script>var QueryAddress=function(){template.helper("formate",function(e){var t=(e+"").replace(/ /,""),d=t.substring(0,3),a=t.substring(3,7),r=t.substring(7,11);return d+" "+a+" "+r});var e=function(){return App.serialize(decodeURIComponent($("#form-queryAddress").serialize()))};return{init:function(){App.removeLoader()},search:function(){var t=e();return/[\u4e00-\u9fa5]/.test(t.keyword)?(QueryAddress.state=$.extend(!0,{},QueryAddress.state,t),QueryAddress.state.draw=1,App.loader(),void App.template({url:App.urls.common.queryAddress,art:QueryAddress.state.art,container:QueryAddress.state.container,data:$.extend(!0,{},{keyword:QueryAddress.state.keyword},{draw:QueryAddress.state.draw},{size:20}),cb:function(e){QueryAddress.state.total=e.total,$("#"+QueryAddress.state.container).closest(".modal-body").scrollTop(0)}})):void App.toastr("中文或不为空","forbidden")},selectIt:function(e){var t=$("#"+QueryAddress.state.container).closest('div[data-role="pie"]').data("mailbox").selector;$(t).val($(e).data("value")),$(t).next(".input-label").html($(e).find(".input-label").html()).addClass("color-green"),$(e).closest(".modal").find(".modal-header .icon-close").click()},confirmIt:function(e){App.loader(),$.ajax({url:App.urls.common.confirmResource,type:"post",dataType:"json",contentType:"application/json; charset=UTF-8",data:JSON.stringify({AddrID:$(e).data("value"),Speedrate:$("#"+QueryAddress.state.container).closest('div[data-role="pie"]').data("mailbox").speedType,Prodspecid:9})}).done(function(t){if(App.removeLoader(),App.checker(t.health)){var d=function(e){return""==e?"无":e},a='<div class="weui-cell padding-z"> <div class="weui-cell__bd text-left">局向名称</div> <div class="weui-cell__ft text-right">'+d(t.resultData.Sitename)+'</div> </div> <div class="weui-cell padding-z"> <div class="weui-cell__bd text-left">OLT厂家名称</div> <div class="weui-cell__ft text-right">'+d(t.resultData.OLTVENDORNAME)+'</div> </div> <div class="weui-cell padding-z"> <div class="weui-cell__bd text-left">速率</div> <div class="weui-cell__ft text-right">'+d(t.resultData.Speedrate)+'</div> </div> <div class="weui-cell padding-z"> <div class="weui-cell__bd text-left">接入方式名称</div> <div class="weui-cell__ft text-right">'+d(t.resultData.Modeshowname)+"</div> </div>";$.modal({title:"地址信息",text:a,buttons:[{text:"取消",className:"default"},{text:"确定",onClick:function(){QueryAddress.selectIt(e)}}]})}})},state:{draw:0,total:0,loading:!1,art:"art-queryAddress",container:"container-queryAddress"}}}();QueryAddress.init()</script>