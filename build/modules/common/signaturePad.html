<div class="modal" id="pad"><div class="modal-header"><i class="iconfont icon-bianji"></i> 客户签名</div><div class="modal-footer"><button class="weui-btn weui-btn_plain-primary" onclick="Pad.clear()">清空</button> <button class="weui-btn weui-btn_primary" onclick="Pad.save()">保存</button></div><div class="modal-body" style="background:#fff;overflow:hidden"><canvas id="signature-pad"></canvas></div></div><script>var Pad=function(){var t,a,i=$("#pad").closest('div[data-role="pie"]'),n=i.data("mailbox").selector,o=i.data("mailbox").button;return{init:function(){i.find(".weui-popup__modal").transitionEnd(function(){$.getScript("/yxs_service/plugins/signature_pad.js",function(i,n,o){App.removeLoader(),Pad.initCanvas(),a=new SignaturePad(t[0])})})},initCanvas:function(){t=$("#signature-pad"),t.attr({width:t.closest(".modal-body").width(),height:t.closest(".modal-body").height()})},clear:function(){a.clear(),$(o).html("手写签名")},save:function(){a.isEmpty()?App.toastr("还未签名","forbidden"):($(n).html('<img src="'+a.toDataURL()+'">'),$(o).html("重新签名"),i.data("close")())}}}();$(function(){Pad.init()})</script>