<div id="container-keXuanBao"></div><script type="text/html" id="art-keXuanBao"><div class="form-group">
    <div class="icon-label"><i class="iconfont icon-cuxiao"></i>
    </div>
    <div class="wrapper">
      <input class="form-control" data-toggle="select" placeholder="默认促销分类" type="text" name="activityType" data-options="{{activityTypes | toString}}" onChange="KeXuanBao.filterBy($(this).val(),'type')" />
      <div class="other"><i class="iconfont icon-xiangyou1"></i>
      </div>
    </div>
  </div>
  <div class="form-group">
    <div class="icon-label"><i class="iconfont icon-liebiao"></i>
    </div>
    <div class="wrapper">
      <input class="form-control" placeholder="可选包/请输入查询条件" type="text" name="keyword" onkeyup="KeXuanBao.filterInResult(this)" />
      <div class="other"><i class="iconfont icon-chaxun color-orange"></i>
      </div>
    </div>
  </div>
  <div class="sub-area" id="keXuanBao-options" style="margin-top:1px;">
    {{if list.length > 0}} {{ each list }} {{if $value.configOptions.length > 0}}
    <div class="form-group" data-activity-type="{{$value.activityType}}" data-id="{{$value.id}}" data-config-options="{{$value.configOptions | toString}}">
      {{else}}
      <div class="form-group" data-activity-type="{{$value.activityType}}" data-id="{{$value.id}}">
        {{/if}}
        <div class="icon-label"><i class="iconfont icon-shoucangxuanzhong"></i>
        </div>
        <div class="wrapper">
          <div class="input-label">{{$value.title}}</div>
          <div class="other">
            <label for="keXuanBao-checkbox{{$value.id}}">
              <input type="checkbox" id="keXuanBao-checkbox{{$value.id}}" name="bao" value="{{$value.id}}" onChange="KeXuanBao.toggleSelect(this,$(this).val())">
              <i class="iconfont icon-square_check"></i>
            </label>
          </div>
        </div>
      </div>
      {{/each}} {{else}} 无可选包 {{/if}}
    </div>
    <div class="form-group">
      <div class="icon-label"><i class="iconfont icon-liebiao"></i>
      </div>
      <div class="wrapper">
        <div class="input-label">已选择</div>
        <div class="other">
        </div>
      </div>
    </div>
    <div class="sub-area" id="container-keXuanBao-selected" style="margin-top:1px;">

    </div>
  </div></script><script>var KeXuanBao=function(){var t=function(){$("#container-keXuanBao").find('input[data-toggle="select"],input[data-toggle="select-popup"]').each(function(){var t=$(this);t.addClass("transparent").after('<div class="input-label">'+t.attr("placeholder")+"</div")})};template.helper("toString",function(t){return JSON.stringify(t)});var o=0,e=function(t,e){return function(){var n=+new Date;n-o>e&&t.apply(this,arguments),o=n}},n=function(t){var o=$(t).val(),e=new RegExp(o.trim(),"im");$("#keXuanBao-options").find(".input-label").each(function(){var t=$(this).closest(".form-group");e.test($(this).html())?t.show():t.hide()})};return{init:function(){App.template({url:App.urls.smartHome.keXuanBao,art:"art-keXuanBao",container:"container-keXuanBao",data:{},cb:function(){t()}})},filterBy:function(t,o){"type"==o&&($("#keXuanBao-options").children(".form-group").hide(),$("#keXuanBao-options").children('.form-group[data-activity-type="'+t+'"]').show())},toggleSelect:function(t,o){var e=$(t).is(":checked");if(e){var n=$(t).closest(".form-group").clone();n.find(".other").html('<i class="iconfont icon-close" onClick="KeXuanBao.deleteIt(this)"></i>'),void 0!=n.data("configOptions")?n.find(".icon-label").html('<div class="circle-button pointer" onClick="KeXuanBao.showModal(this)">参</div>'):n.find(".icon-label").html(""),$("#container-keXuanBao-selected").append(n)}else $("#container-keXuanBao-selected").find('.form-group[data-id="'+o+'"]').remove()},deleteIt:function(t){var o=$(t).closest(".form-group");$("#keXuanBao-options").children('.form-group[data-id="'+o.data("id")+'"]').find('input[type="checkbox"]').prop("checked",!1),o.remove()},showModal:function(t){App.modal({url:App.modules.networkAdd.keXuanBaoConfig,data:{target:'#container-keXuanBao-selected .form-group[data-id="'+$(t).closest(".form-group").attr("data-id")+'"]',options:$(t).closest(".form-group").data("configOptions")}})},filterInResult:e(n,200)}}();KeXuanBao.init()</script>