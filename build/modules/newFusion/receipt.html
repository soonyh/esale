<div class="modal"><div class="modal-header"><i class="iconfont icon-huizhi"></i> 回执 - 业务受理协议</div><div class="modal-footer"><button href="javascript:;" class="weui-btn weui-btn_plain-primary" onclick="Receipt.signature(this)" id="ksiekl">手写签名</button> <button class="weui-btn weui-btn_primary" id="btn-save" data-loading-text="保存回执..." onclick="Receipt.save()">保存回执</button></div><div class="modal-body"><div id="container-receipt"><img src="/yxs_service/img/holder.jpg" width="96%" style="margin:2%"></div><div class="hide" id="hide992"></div></div></div><div id="test"></div><script>var Receipt=function(){return{init:function(){$.ajax({url:App.urls.networkAdd.getAgreement,type:"post",dataType:"json",data:{}}).done(function(t){var e=$("<img/>").attr({src:t.pic,width:"96%"}).css("margin","2%");$("#container-receipt").html(e),App.removeLoader()})},save:function(){if(0==$("#hide992").children("img").size())return void App.toastr("您还未签名","forbidden");var t=$("#btn-save").button("loading");$.ajax({url:App.urls.networkAdd.saveReceipt,type:"post",dataType:"json",data:JSON.stringify({signature:$("#hide992").children("img").attr("src")})}).done(function(){t.button("reset"),$.confirm("回执保存成功，前往收银台",function(){$("#btn-save").closest('[data-role="pie"]').find(".modal-header .icon-close").click()},function(){}),NetworkAdd.state.receipt=!0})},signature:function(){App.modal({url:App.modules.common.signaturePad,data:{button:"#ksiekl",selector:"#hide992"},reload:!1})}}}();Receipt.init()</script>